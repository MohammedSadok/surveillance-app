generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model SessionExam {
  id        Int       @id @default(autoincrement())
  type      String
  dateDebut DateTime  @db.Date()
  dateFin   DateTime  @db.Date()
  Journee   Journee[]
}

model Journee {
  id            Int         @id @default(autoincrement())
  date          DateTime    @db.Date()
  sessionExam   SessionExam @relation(fields: [sessionExamId], references: [id], onDelete: Cascade)
  sessionExamId Int
  Creneau       Creneau[]
}

model Creneau {
  id         Int      @id @default(autoincrement())
  heureDebut String
  heureFin   String
  journeeId  Int
  journee    Journee  @relation(fields: [journeeId], references: [id], onDelete: Cascade)
  Examen     Examen[]
}

model Examen {
  id                     Int    @id @default(autoincrement())
  nomDeModule            String
  filieres               String
  nombreDetudiantInscrit Int

  creneauId          Int
  enseignantId       Int        @unique
  responsable_module Enseignant @relation(fields: [enseignantId], references: [id], onDelete: Cascade)

  Surveillance Surveillance[]
  Creneau      Creneau        @relation(fields: [creneauId], references: [id], onDelete: Cascade)
}

model Departement {
  id          Int          @id @default(autoincrement())
  nom         String
  Enseignants Enseignant[]
}

model Enseignant {
  id            Int            @id @default(autoincrement())
  nom           String
  prenom        String
  numero_tel    String
  e_mail        String
  departementId Int
  departement   Departement    @relation(fields: [departementId], references: [id], onDelete: Cascade)
  Surveillance  Surveillance[]
  Examen        Examen?
}

model Surveillance {
  id          Int          @id @default(autoincrement())
  enseignants Enseignant[]
  examenId    Int
  examen      Examen       @relation(fields: [examenId], references: [id], onDelete: Cascade)
  local       Local        @relation(fields: [localId], references: [id], onDelete: Cascade)
  localId     Int          @unique
}

model Local {
  id           Int           @id @default(autoincrement())
  nom          String
  emplacement  String
  taille       Int
  surveillance Surveillance?
}
